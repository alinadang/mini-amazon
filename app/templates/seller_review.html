{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <h3>Review seller: {{ seller.firstname }} {{ seller.lastname }}</h3>

  <form method="post">
    {{ csrf_token() if csrf_token is defined }}

    <div class="form-group">
      <label for="rating">Rating (1–5)</label>
      <input type="number"
             class="form-control"
             id="rating"
             name="rating"
             min="1" max="5" required
             value="{{ (existing[1] if existing else '') }}">
    </div>

    <div class="form-group mt-3">
      <label for="comment">Comment</label>
      <textarea class="form-control"
                id="comment"
                name="comment"
                rows="3"
                placeholder="Share your experience...">{{ existing[2] if existing else '' }}</textarea>
    </div>

    <div class="mt-3">
      <button type="submit" class="btn btn-primary">
        {% if existing %}Update Review{% else %}Submit Review{% endif %}
      </button>

      {% if existing %}
        <form method="post"
              action="{{ url_for('reviews.seller_review_delete', seller_id=seller.id) }}"
              style="display:inline-block; margin-left:10px;">
          {{ csrf_token() if csrf_token is defined }}
          <button type="submit" class="btn btn-danger btn-sm"
                  onclick="return confirm('Delete your review for this seller?');">
            Delete Review
          </button>
        </form>
      {% endif %}
    </div>
  </form>

  <p class="mt-3">
    <a href="{{ url_for('reviews.my_reviews') }}">← Back to My Reviews</a>
  </p>
</div>
{% endblock %}
