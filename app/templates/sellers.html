<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Seller Inventory</title>
    <script src="{{ url_for('static', filename='sellers.js') }}"></script>
</head>
<body>
    <h1>Seller Inventory</h1>

    <!-- for users to type seller id -->
    <label>Seller ID: <input id="sellerIdInput" type="number" /></label>
    <button id="loadBtn">Load</button>

    <div id="seller-inventory" style="margin-top:1rem"></div>

    <script>
    // use dynamic seller id w/o editing sellers.js
    document.addEventListener('DOMContentLoaded', function() {
        const loadBtn = document.getElementById('loadBtn');
        const sellerIdInput = document.getElementById('sellerIdInput');
        loadBtn.addEventListener('click', async () => {
            const sid = sellerIdInput.value;
            if (!sid) return alert('Enter a seller id');
            // call API and render results similarly to sellers.js
            const resp = await fetch(`/api/seller_inventory?seller_id=${sid}`);
            if (!resp.ok) {
                const err = await resp.json().catch(()=>({}));
                return alert('Error: ' + (err.error || resp.status));
            }
            const data = await resp.json();
            const invDiv = document.getElementById('seller-inventory');
            invDiv.innerHTML = '';
            if (!data || data.length === 0) {
                invDiv.textContent = 'No products found for this seller.';
                return;
            }
            data.forEach(item => {
                const itemElem = document.createElement('div');
                const price = item.seller_price !== null ? item.seller_price : item.base_price;
                itemElem.innerHTML = `<strong>${item.name}</strong> — $${Number(price).toFixed(2)}
                                      <div>Qty: ${item.quantity} • Available: ${item.available}</div>`;
                invDiv.appendChild(itemElem);
            });
        });
    });
    </script>
</body>
</html>
